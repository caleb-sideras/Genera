{% extends 'base.html' %}
{% load static %}

{% block head_block %}
<!-- <title>Metamask Demo</title> -->
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://unpkg.com/@metamask/detect-provider/dist/detect-provider.min.js"></script>
<script type="text/javascript" src="{% static 'js/metamask.js' %}"></script>
<script type="text/javascript" src="{% static 'js/collection.js' %}"></script>
{% endblock %}

{% block body_block %}
    <input type="hidden" id="js_vars" data-ajax_url='{{ajax_url}}' data-json="{{erc721_json}}">

<div class="filter">
    <h1 class="collection_title">{{collection_data.collection_name}} Collection</h1>
    <div class="view_collection_main">
        <div class="image_preview"></div>
        
    <!-- "name": "Void#1",
    "description": "Void NFT girl for void chans",
    "image": "https://ipfs.io/ipfs/QmZb77bDc39me3HMcK7zQC5z6yzqm88fdxDe82NRNz2qUZ?filename=Void1.png",
    "attributes": [
        {
        "trait_type": "Body",
        "value": "Girl"
        },
        {
        "trait_type": "Shirt",
        "value": "Crop Top (Dotted)"
        },
        {
        "trait_type": "Hair",
        "value": "Anime (Striped)"
        },
        {
        "trait_type": "Accessories",
        "value": "Choker"
        }
    ] -->
        <div class="collection_structure">
            <div class="all_collections_layout">
                {% if collection_images %}
                    {% for entry in collection_images %}
                        <div class="collection_card shadow_strong rounded_container_no_padding">
                                
                            {% if entry.ipfs_bool%}
                            <!-- <img src="/static/icons/remove.svg" class="close_button remove_image_button color_image_orange"> -->
                            <!-- <img src="/static/icons/ipfs_deployed.svg" class="close_button ifps_check"> -->
                            <!-- <img src="{{entry.ipfs_image_path}}" alt="{{entry.name}} image should be here" class="nft_image" onclick="open_images(this)"> -->
                            <!-- <script>var status = "{{entry.ipfs_bool}}"
                                    // console.log(typeof(status))
                                    console.log(typeof(status))
                            </script> -->
                            <img src="{{entry.path_compressed}}" data-fullrez ="{{entry.path}}" alt="{{entry.name}} image should be here" class="nft_image" onclick="open_images(this)">
                                {% else %}
                            <!-- <img src="/static/icons/remove.svg" class="close_button remove_image_button color_image_orange"> -->
                            <img src="{{entry.path_compressed}}" data-fullrez ="{{entry.path}}" alt="{{entry.name}} image should be here" class="nft_image" onclick="open_images(this)">
                            {% endif %}
                            <div>
                                <p class="no_margin center">{{entry.name}}</p>
                                <pre style="display: none;">{{entry.metadata}}</pre>
                                <div style="display: none;">{{entry.ipfs_bool}}</div>
                                <div style="display: none;">{{entry.deployed_bool}}</div>
                                <!-- <a href="https://moralis.io/" target="_blank" rel="noopener noreferrer"> -->
                                    <div class="collection_card_button_container">
                                        {% if entry.ipfs_bool%}
                                            <div class="collection_card_button white_background" style=" cursor: auto;" >
                                                <img src="/static/icons/check.svg" alt="check">
                                                <h5>IPFS</h5>
                                            </div>
                                        {% endif %}
                                        {% if entry.deployed_bool%}
                                        <div class="collection_card_button white_background" style=" cursor: auto;"> 
                                            <img src="/static/icons/check.svg" alt="check">
                                            <h5>Mint</h5>
                                            </div>
                                        {% endif %}
                                    </div>
                                <!-- </a> -->
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>

        <div class="upload_properties">
                <div class="rounded_container shadow_strong">
                    <h3 class="no_margin center">Collection Properties</h3>
                    {% if collection_data %}
                        <div >
                            <h5 class="no_margin">Name</h5>
                            <h5 class="collection_properties white_background">
                                {{collection_data.collection_name}}
                            </h5>
                        </div>
                        <div>
                            <h5 class="no_margin">Resolution</h5>
                            <h5 class="collection_properties white_background">
                                {{collection_data.dimension_x}} {{collection_data.dimension_y}}
                            </h5>
                        </div>
                        <div>
                            <h5 class="no_margin">Size</h5>
                            <h5 class="collection_properties white_background">
                                {{collection_data.collection_size}}
                            </h5>
                        </div>
                        <div>
                            <h5 class="no_margin">Description</h5>
                            <h5 class="collection_properties white_background">
                                {{collection_data.description}}
                            </h5>
                        </div>
                        {% if collection_data.collection_ifps_bool %}
                        <div class="properties_container">
                            <img src="/static/icons/check.svg" alt="check">
                            <h5>Collection Uploaded to IFPS</h5>
                        </div>
                        {% endif %} 
                        {% if collection_data.contract_bool %}
                        <div class="properties_container">
                            <img src="/static/icons/check.svg" alt="check">
                            <h5>Contract Deployed <a href="https://rinkeby.etherscan.io/address/{{collection_data.contract_address}}" style="text-decoration: underline;">{{collection_data.contract_address}}</a></h5>
                        </div>
                        {% endif %}
                        {% if collection_data.tokens_deployed %}
                        <div class="properties_container">
                            <img src="/static/icons/check.svg" alt="check">
                            <h5>Collection Minted</h5>
                        </div>
                        {% endif %} 
                    {% endif %}
                </div>
                
                {% if not collection_data.collection_ifps_bool %}
                    <button type="button" class="general_button_no_border orange_background shadow_strong rounded_container_no_padding" style="cursor: default">
                        <h4 class="no_margin">Delete Duplicates</h4>
                    </button>
                {% endif %}
                {% if not collection_data.tokens_deployed %}
                        <button class="general_button_no_border light_purple_background shadow_strong rounded_container_no_padding" onclick="mint_collection_request()" type="button">
                        <h4 class="no_margin generate">Mint Collection</h4>
                    </button>
                {% endif %} 
                
                
        </div>
    </div>
</div>
{% endblock %}